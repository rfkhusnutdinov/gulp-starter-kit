# Стартовый шаблон для верстки

Шаблон для верстки. Шаблон использует сборщик [Gulp](https://gulpjs.com/). Основной файл в котором написана логика работы gulp - `gulpfile.js`. Также задачи которые выполняет сборщик, вынесены в отдельную папку `gulp`. В ней находятся JS файлы которые отвечает за механику работы той или иной задачи.

## Структура шаблона

```
├── dist # Конечная папка после сборки
├── gulp
  ├── images.js # Работа с изображениями
  ├── clean.js # Задача по очистке папки dist в которую собираются файлы
  ├── fonts.js # Работа со шрифтами
  ├── html.js # Работа с HTML файлами
  ├── misc.js # Работа с остальными файлами
  ├── scripts.js # Работа с JS файлами
  ├── server.js # Запуск и работа сервера для Live reload
  └── styles.js # Работа с Sass и CSS
├── src # Папка с исходными файлами проекта
  ├── fonts # Шрифты
  ├── images # Изображения
  ├── js # JS скрипты
  ├── misc
  ├── scss # Scss стили
  └── templates # HTML файлы
├── .babelrc # Настройки для Babel
├── .browserslistrc # Версии браузеров для поддержки
├── .editorconfig # Конфиг для форматирования файлов и общего стиля написания кода
├── .prettierignore # Ignore файл для Prettier плагина VSCode
├── .stylelintignore # Ignore файл для Stylelint плагина VSCode
├── .stylelintrc # настройки для Stylelint плагина
├── .gulpfile.js # настройки для Gulp
├── package.json # основной файл проекта с зависимостями
└── README.md

```

## Установка, настройка и запуск

Скачать файлы распложенные в данном репозитории. Клонировать, скачать .zip неважно. Далее перейти в папку со сборкой.

Выполнить команду в терминале `npm install` для того чтобы установить все зависимости.

Запуск одного из двух режимов:

- Режим разработки `npm run dev`
- Режим сборки для production `npm run build`

Также есть возможность запускать gulp задачи отдельно (только в режиме сборки для production):

- `npm run build:html` - задача по сборке шаблонов
- `npm run build:styles` - задача по сборке стилей
- `npm run build:scripts` - задача по сборке скриптов
- `npm run build:fonts` - задача по сборке шрифтов
- `npm run build:misc` - задача по сборке папки misc
- `npm run build:images` - задача по сборке изображений

## HTML

Вся разметка пишется в папке `src/templates`. Скомпилированная разметка попадает в корень папки `dist`.

В качестве шаблонизатора используется [PUG](https://pugjs.org/), которые имеет большие возможности, а частности: наследование шаблонов, переменные и т.д.

В коде уже используется наследование шаблонов. Имеется дефолтный layout который в большинстве случае используется на большинстве страниц. Чтобы не приходилось копипастить части которые повторяются (html, head, body и т.д.), то такая разметка была вынесена в общий layout от которого все остальные страницы и наследуются. Так имеется пример главной страницы `index.pug`.

Компилироваться будут только файлы которые расположены в корне папки `src/templates`.

В папке `src/templates/layouts` хранятся разные layout шаблонов.

В папке `src/templates/components` хранятся отдельные компоненты проекта.

Также при сборке, HTML форматируется к определенному формату: выравниваются отступы (два пробела), разметка, убирается все лишнее и т.д. И весь текст проходит через `typograf` (помогает отформатировать текст по правилам типографики: заменить кавычки, исправить минус на дефис или тире, расставить неразрывные пробелы, специальные символы, исправить частые ошибки в сокращениях и опечатки). Более подробно можно посмотреть в `gulp/html.js`.

## Стили

Все стили пишутся в папке `src/scss`. Скомпилированные стили попадают в папку `dist/css`.

Для стилей используется препроцессор [Sass](https://sass-scss.ru/) с синтаксисом SCSS.

Стили сохраняются в двух форматах: обычный и минифицированном. По умолчанию, к странице подключен последний формат.

Присутствует базовая нормализация стилей `src/scss/global/normalize.scss` и некоторое кол-во глобальных стилей в `src/scss/global/global.scss`, и главный файл `src/scss/style.scss` в котором должны подключаться все остальные файлы.

Папка `src/scss/components` для компонентов вашего проекта. В папке `src/scss/global` хранятся глобальные переменные, стили, которые задаются для всего проекта.

> Рекомендация: не писать в style.scss никакой код помимо импортов. Тем самым декомпозируя ваши стили на различные компоненты.

## JS скрипты

Все скрипты пишутся в папке `src/js`. Скомпилированные скрипты попадают в папку `dist/js`.

Сборка всех JS скриптов происходит с помощью сборщика [Rollup](https://rollupjs.org/).

Имеется два главных файла которые в конечном счете и компилируются:

- `app.js` - главный JS файл всего проекта. Все необходимые инициализации и кастомный код пишется в нем.
- `libs.js` - файл предназначенный для подключения сторонних библиотек, чтобы не захламлять `app.js`.

Чтобы подключенные в `libs.js` плагины и модули были видны в `app.js`, можно в первом файле заносить импортируемые классы, методы и т.д. в глобальную область видимости через `globalThis.Plugin = Plugin`.

Также в скриптах можно подключать `CSS` файлы, которые будут скомпилированы в отдельный файл `libs.min.css` и помещен в папку со всеми CSS стилями (`dist/css`).

## Live server

В качестве Live сервера используется `Browser Sync`. В режиме разработки, предоставляет возможность открытия проекта по локальному адресу `127.0.0.1:3000` и автоматический перезапуск страницы при изменении файлов проекта.

## Шрифты

Все необходимые шрифты загружаются в папку `src/fonts`. После сборки попадают в папку `dist/fonts`.

Шрифты в данной сборке просто копируются без внесения каких-либо изменений, конвертаций в другие форматы и т.д. По-умолчанию, работает с файлами шрифтов в формате `woff` и `woff2`, при необходимости форматы можно изменить (добавить, удалить) в `gulpfile.js` в объекте `paths`. На текущий момент, можно использовать только `woff2`, так как он поддерживается во всех современных браузерах.

## Изображения

Все изображения, иконки и т.д. хранятся в папке `src/images`. Переносятся при сборке в папку `dist/images`.

Изображения в форматах `jpg`, `jpeg`, `png` автоматически конвертируются в `webp` и в конечную папку попадает только файлы этого формата. Связано это с тем, что на текущий момент `webp` поддерживается во всех современных браузерах, и необходимости в указании fallback изображений нет. Также данный формат более оптимизирован и весит меньше, что лучше сказывается на скорость работы сайта.

Изображения остальных форматов не конвертируются, а переносятся как есть в конечную папку.

## Все остальные файлы

Все файлы, какие-то PDF документы, видео и т.д. помещаются в папку `src/misc`. Которые после сборки попадают в корень `dist`. Если нужно чтобы файл попал в какую-то папку или создали папку, то его нужно поместить в соответствующую папку в `src/misc`. Например, `src/misc/video/my_video.mp4` попадет при сборке в `dist/video/my_video.mp4`.

## Объект `paths` в `gulpfile.js`

В данном объекте указываются пути для файлов, где указываются пути внутри папки `src`, в какую папку их нужно переместить при сборке, за каким файлами должен смотреть наблюдатель и обновлять локальный Live сервер.

## Правила написания кода

Мои личные рекомендации и правила которыми я пользуюсь (это не все, раздел будет пополняться...).

### HTML

- У HTML тегов первым определять атрибут `class`, для визуального удобства восприятия БЭМ классов
- Для форм определять атрибуты `method` и `action`
- Для кнопок которые отвечают за отправку форму, определять атрибут `type="submit"`
- Не добавлять лишнюю вложенность если без неё можно обойтись
- Соблюдать иерархию заголовков `(h1 -> h2 -> h3)`
- Для ссылок без текста внутри определять `aria-label`

### Стили

- Для всех интерактивных элементов определять поведение при `hover`
- Назначать `hover` только для экранов и устройств которые его поддерживают `@media (any-hover: hover)`
- По умолчанию поведение при `active` такое же как при `hover` если в дизайне не обозначено другого
- Каждый БЭМ блок должен быть определен в отдельном `.scss` файле
- По возможности минимально использовать `@media (width < ...) || @media (width >= ...)` и для адаптивности использовать функцию `fluid` для адаптивных значений через `clamp`
- Использовать относительно единицы `em` и `rem`
- Для именования классов использовать методологию БЭМ
